<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medeiros Artigos Militares - Equipado para a Missão</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/js/all.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: { 'brand-gold': '#FFD700', 'brand-green-dark': '#1A3C34', 'brand-dark': '#111827' },
                    fontFamily: { sans: ['Poppins', 'sans-serif'] },
                    animation: {
                        'gradient-bg': 'gradient-bg 20s ease infinite', // Velocidade ajustada para mais lento
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 2s infinite ease-in-out', 'gradient-text-scroll': 'gradient-text-scroll 4s linear infinite',
                        'blob-walk-1': 'blob-walk-1 30s ease-in-out infinite', 'blob-walk-2': 'blob-walk-2 35s ease-in-out infinite',
                    },
                    keyframes: {
                        'gradient-bg': { '0%, 100%': { backgroundPosition: '0% 50%' }, '50%': { backgroundPosition: '100% 50%' } },
                        'float': { '0%, 100%': { transform: 'translateY(0px)' }, '50%': { transform: 'translateY(-20px)' } },
                        'pulse-glow': { '0%, 100%': { boxShadow: '0 0 20px rgba(255, 215, 0, 0.5)' }, '50%': { boxShadow: '0 0 35px rgba(255, 215, 0, 1)' } },
                        'gradient-text-scroll': { '0%': { backgroundPosition: '0% 50%' }, '100%': { backgroundPosition: '200% 50%' } },
                        'blob-walk-1': { '0%': { transform: 'translate(0, 0) scale(1)' }, '25%': { transform: 'translate(20vw, 15vh) scale(1.2)'}, '50%': { transform: 'translate(-10vw, -20vh) scale(0.9)'}, '75%': { transform: 'translate(15vw, -10vh) scale(1.1)'}, '100%': { transform: 'translate(0, 0) scale(1)' } },
                        'blob-walk-2': { '0%': { transform: 'translate(0, 0) scale(1)' }, '25%': { transform: 'translate(-15vw, -10vh) scale(0.8)'}, '50%': { transform: 'translate(20vw, 10vh) scale(1.1)'}, '75%': { transform: 'translate(-10vw, 15vh) scale(1)'}, '100%': { transform: 'translate(0, 0) scale(1)' } },
                    }
                }
            }
        }
    </script>
    
    <style>
        html { scroll-behavior: smooth; }
        .gradient-text { background: linear-gradient(90deg, #FFD700, #E0E0E0, #FFD700); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-fill-color: transparent; background-size: 200% auto; }
        .glassmorphism { background: rgba(26, 60, 52, 0.2); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(255, 215, 0, 0.1); z-index: 2; position: relative; }
        header.scrolled { background-color: rgba(17, 24, 39, 0.8); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
        .reveal-on-scroll { opacity: 0; transform: translateY(40px); transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .reveal-on-scroll.visible { opacity: 1; transform: translateY(0); }
        .hero-image { filter: drop-shadow(0 0 35px rgba(255, 215, 0, 0.3)); transition: filter 0.3s ease; }
        .hero-image-container:hover .hero-image { filter: drop-shadow(0 0 50px rgba(255, 215, 0, 0.5)); }
        #cursos, #elite-fardamentos { display: none; }
        #cursos.active, #elite-fardamentos.active { display: block; }
        .liquid-container { position: fixed; inset: 0; z-index: 0; overflow: hidden; filter: blur(100px) saturate(150%); }
        .liquid-blob { position: absolute; border-radius: 50%; opacity: 0.5; }
        .product-card, .course-card { cursor: pointer; }
        body.modal-open { overflow: hidden; }

        /* ESTILO DA NOTIFICAÇÃO DO CARRINHO */
        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 22px;
            height: 22px;
            background-color: red;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: bold;
            border: 2px solid #111827; /* Cor do fundo do botão */
        }
    </style>
</head>
<body class="bg-gradient-to-r from-brand-green-dark via-brand-dark to-brand-dark text-gray-200 font-sans antialiased animate-gradient-bg" style="background-size: 200% 200%;">

    <div class="liquid-container">
        <div class="liquid-blob top-1/4 left-1/3 w-96 h-96 bg-brand-gold animate-blob-walk-1"></div>
        <div class="liquid-blob bottom-1/4 right-1/3 w-80 h-80 bg-brand-green-dark animate-blob-walk-2"></div>
    </div>

    <header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
        <nav class="container mx-auto px-4 sm:px-6 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <img src="https://i.imgur.com/pNd3LVh.png" alt="Logo" class="h-10">
                <h1 class="text-sm sm:text-base md:text-xl font-bold gradient-text animate-gradient-text-scroll">Medeiros Artigos Militares</h1>
            </div>
            
            <div class="hidden md:flex items-center gap-6">
                 <a href="#fardamento" class="text-sm font-semibold hover:text-brand-gold transition-colors">Fardamentos</a>
                 <a href="#acampamento" class="text-sm font-semibold hover:text-brand-gold transition-colors">Acampamento</a>
                 <a href="#cursos" onclick="toggleSection('cursos')" class="text-sm font-semibold hover:text-brand-gold transition-colors">Cursos</a>
            </div>
            <div class="flex items-center gap-4">
                <div class="md:hidden">
                    <button id="menu-btn" class="text-white text-2xl focus:outline-none">
                        <i class="fa-solid fa-bars"></i>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden bg-brand-dark/90 backdrop-blur-sm">
            <a href="#fardamento" class="block py-2 px-4 text-sm text-gray-200 hover:bg-brand-green-dark">Fardamentos</a>
            <a href="#acampamento" class="block py-2 px-4 text-sm text-gray-200 hover:bg-brand-green-dark">Acampamento</a>
            <a href="#cursos" class="block py-2 px-4 text-sm text-gray-200 hover:bg-brand-green-dark" onclick="toggleSection('cursos')">Cursos</a>
        </div>
    </header>

    <main class="relative z-10">
        <section class="relative min-h-screen flex items-center justify-center overflow-hidden pt-32 lg:pt-20">
            <div class="absolute inset-0 bg-black opacity-50"></div>
            <div class="container mx-auto px-4 sm:px-6 z-10">
                <div class="lg:flex lg:items-center">
                    <div class="lg:w-1/2 text-center lg:text-left mb-12 lg:mb-0">
                        <h2 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-white leading-tight mb-4 reveal-on-scroll">
                             Equipado para a <span class="gradient-text">Missão</span>. Pronto para o <span class="gradient-text">Dever</span>.
                        </h2>
                        <p class="text-lg sm:text-xl text-gray-300 mb-8 reveal-on-scroll" style="transition-delay: 0.2s;">
                           Os melhores kits de fardamento, acampamento e cursos para quem vive e respira o operacional.
                        </p>
                        <a href="#search-section" class="bg-brand-gold hover:bg-yellow-500 text-brand-dark font-bold py-3 px-8 rounded-full text-lg transition duration-300 transform hover:scale-105 inline-block shadow-lg shadow-yellow-500/50 reveal-on-scroll" style="transition-delay: 0.4s;">
                            Ver Equipamentos
                        </a>
                    </div>
                    <div class="lg:w-1/2 flex justify-center items-center mt-8 lg:mt-0">
                        <div class="animate-float hero-image-container">
                             <img src="https://i.imgur.com/jbpqCx4.png" alt="Kit Comandos" class="w-full max-w-xs sm:max-w-sm md:max-w-md lg:max-w-2xl mx-auto hero-image">
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="search-section" class="py-16">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="max-w-2xl mx-auto reveal-on-scroll glassmorphism p-6 rounded-2xl">
                    <label for="searchInput" class="block text-xl md:text-2xl font-bold text-center mb-4 text-white">Busca de Equipamentos</label>
                    <div class="relative">
                        <input type="text" id="searchInput" placeholder="Digite o nome de um kit ou item..." class="w-full bg-gray-900/50 border border-gray-600 rounded-full px-6 py-3 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-brand-gold">
                        <i class="fa-solid fa-search absolute right-6 top-1/2 -translate-y-1/2 text-gray-400"></i>
                    </div>
                </div>
            </div>
        </section>

        <div id="fardamento" class="product-section py-10 sm:py-16">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16 reveal-on-scroll section-header">
                    <h3 class="text-3xl sm:text-4xl font-bold text-white">Kits de <span class="gradient-text">Fardamento</span></h3>
                    <p class="text-gray-400 mt-2">Do básico ao avançado, a prontidão que você precisa.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 product-grid"></div>
                <div class="text-center mt-12 reveal-on-scroll section-header">
                    <button onclick="toggleSection('elite-fardamentos')" class="bg-brand-green-dark text-white font-semibold py-3 px-8 rounded-full border-2 border-brand-gold hover:bg-brand-gold hover:text-brand-dark transition-all duration-300">
                        Ver Elite dos Fardamentos <i class="fa-solid fa-angles-right ml-2"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <div id="elite-fardamentos" class="product-section py-20 sm:py-24 bg-brand-dark/50">
             <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16 reveal-on-scroll section-header">
                    <h3 class="text-3xl sm:text-4xl font-bold text-white">Elite dos <span class="gradient-text">Fardamentos</span></h3>
                    <p class="text-gray-400 mt-2">Equipamentos premium para operadores de alto desempenho.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 product-grid" id="elite-fardamentos-grid"></div>
            </div>
        </div>
        
        <div id="acampamento" class="product-section py-10 sm:py-16">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16 reveal-on-scroll section-header">
                    <h3 class="text-3xl sm:text-4xl font-bold text-white">Kits de <span class="gradient-text">Acampamento</span></h3>
                    <p class="text-gray-400 mt-2">Prepare-se para qualquer terreno com nossos kits de sobrevivência.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 product-grid"></div>
            </div>
        </div>
        
        <div id="cursos" class="product-section py-20 sm:py-24 bg-brand-dark/50">
             <div class="container mx-auto px-4 sm:px-6">
                <div class="text-center mb-12 sm:mb-16 reveal-on-scroll section-header">
                    <h3 class="text-3xl sm:text-4xl font-bold text-white">Capacitação e <span class="gradient-text">Cursos</span></h3>
                    <p class="text-gray-400 mt-2">Conhecimento que salva vidas e impulsiona carreiras.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 course-grid"></div>
            </div>
        </div>
        
        <section id="contato" class="py-20 sm:py-24">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="glassmorphism max-w-2xl mx-auto p-6 md:p-8 rounded-2xl reveal-on-scroll">
                    <h2 class="text-2xl md:text-3xl font-bold text-center mb-6 text-white">Finalizar Pedido</h2>
                    <div id="formError" class="hidden text-red-400 bg-red-900/50 border border-red-400 rounded-lg p-3 mb-4 text-center"></div>
                    <form onsubmit="event.preventDefault(); checkout();" class="space-y-6">
                        <div>
                            <label for="student-name" class="block text-sm font-semibold text-gray-300 mb-2">Nome do Aluno</label>
                            <input type="text" id="student-name" placeholder="Digite seu nome completo" required class="w-full bg-gray-900/50 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-brand-gold">
                        </div>
                        <div>
                            <label for="student-class" class="block text-sm font-semibold text-gray-300 mb-2">Turma do Aluno</label>
                            <input type="text" id="student-class" placeholder="Ex: Bombeiro Civil Turma 10" required class="w-full bg-gray-900/50 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-brand-gold">
                        </div>
                        <div>
                            <label for="payment-method" class="block text-sm font-semibold text-gray-300 mb-2">Método de Pagamento</label>
                            <select id="payment-method" required class="w-full bg-gray-900/50 border border-gray-600 rounded-lg px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-brand-gold">
                                <option value="" disabled selected>Selecione o método de pagamento</option>
                                <option value="Cartão de Débito">Cartão de Débito</option>
                                <option value="Cartão de Crédito">Cartão de Crédito</option>
                                <option value="PIX">PIX</option>
                            </select>
                        </div>
                        <div class="text-xs text-gray-400 bg-gray-900/50 p-3 rounded-lg border-l-4 border-brand-gold">
                            Os itens devem ser retirados no local da instrução. Por favor, combine as datas de pagamento e as parcelas após a confirmação do pedido.
                        </div>
                        <button type="submit" class="w-full bg-brand-gold text-brand-dark font-bold py-3 rounded-full text-lg transition duration-300 transform hover:scale-105 animate-pulse-glow">
                            Enviar Pedido via WhatsApp
                        </button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-black text-gray-400 py-10 relative z-10">
        <div class="container mx-auto px-4 sm:px-6 text-center">
            <p class="text-lg font-bold text-white mb-2">Medeiros Artigos Militares</p>
            <p class="text-sm mb-6">Uniformizando Profissionais desde 2019</p>
            <div class="flex justify-center items-center space-x-6 mb-8">
                <a href="https://wa.me/5561998300711" target="_blank" class="text-3xl hover:text-brand-gold transition-all duration-300 transform hover:scale-125"><i class="fab fa-whatsapp"></i></a>
                <a href="https://www.instagram.com/bombeirocivilbrasilia/" target="_blank" class="text-3xl hover:text-brand-gold transition-all duration-300 transform hover:scale-125"><i class="fab fa-instagram"></i></a>
                <a href="https://www.instagram.com/gateeducacional/" target="_blank" class="text-3xl hover:text-brand-gold transition-all duration-300 transform hover:scale-125"><i class="fab fa-instagram"></i></a>
                <a href="mailto:coordenadormedeiros@gmail.com" class="text-3xl hover:text-brand-gold transition-all duration-300 transform hover:scale-125"><i class="fas fa-envelope"></i></a>
            </div>
            <p class="text-xs text-gray-500">&copy; 2019. Todos os direitos reservados.</p>
        </div>
    </footer>

    <div id="cart-button-container" class="relative">
        <button class="fixed bottom-6 right-6 z-40 bg-brand-dark text-white w-16 h-16 rounded-full flex items-center justify-center shadow-lg text-2xl transition-transform transform hover:scale-110" onclick="openCartModal()">
            <i class="fa-solid fa-shopping-cart"></i>
            <span id="cartCount" class="cart-badge hidden">0</span>
        </button>
    </div>
    
    <div id="cart-modal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4" onclick="closeCartModal()">
         <div class="glassmorphism w-full max-w-md max-h-[90vh] overflow-y-auto rounded-2xl p-6 relative" onclick="event.stopPropagation()">
            <button class="absolute top-4 right-4 text-white text-2xl" onclick="closeCartModal()">&times;</button>
            <h3 class="text-2xl font-bold text-brand-gold text-center mb-4"><i class="fa-solid fa-shopping-cart mr-2"></i> Carrinho</h3>
            <ul id="cart-items-list" class="list-none p-0 m-0 mb-4 divide-y divide-gray-700"></ul>
            <div id="cart-total" class="text-right font-bold text-lg my-4">Total: R$0,00</div>
            <a href="#contato" class="cart-checkout block w-full text-center bg-brand-green-dark hover:bg-opacity-80 text-white font-bold py-3 px-4 rounded-lg transition-colors" onclick="closeCartModal()">Finalizar Pedido</a>
        </div>
    </div>

    <div id="product-modal" class="hidden fixed inset-0 bg-black/70 backdrop-blur-sm z-[100] flex items-center justify-center p-4" onclick="closeModal()">
        <div class="glassmorphism w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl p-6 relative" onclick="event.stopPropagation()">
            <button class="absolute top-4 right-4 text-white text-2xl" onclick="closeModal()">&times;</button>
            <div id="modal-content"></div>
        </div>
    </div>


    <script>
        // Scripts essenciais
        const header = document.querySelector('header');
        window.addEventListener('scroll', () => header.classList.toggle('scrolled', window.scrollY > 10));

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, { threshold: 0.1 });
        
        const menuBtn = document.getElementById('menu-btn');
        const mobileMenu = document.getElementById('mobile-menu');
        menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
        mobileMenu.addEventListener('click', (e) => { if(e.target.tagName === 'A') mobileMenu.classList.add('hidden'); });

        let cart = [];
        const productModal = document.getElementById('product-modal');
        const modalContent = document.getElementById('modal-content');
        const cartModal = document.getElementById('cart-modal');
        const cartItemsList = document.getElementById('cart-items-list');
        const cartTotalEl = document.getElementById('cart-total');
        const cartCountBadge = document.getElementById('cartCount');


        function promptForCourseCode(url, event) {
            event.preventDefault();
            const accessCode = "GATE.CURSOS.2025";
            const userCode = prompt("Para acessar o curso, por favor, insira o código de acesso:");
            if (userCode === accessCode) window.open(url, '_blank');
            else if (userCode !== null) alert("Código de acesso inválido!");
        }

        function openModal(cardElement) {
            const contentToClone = cardElement.querySelector('.product-details, .course-details');
            const titleToClone = cardElement.querySelector('h3');
            if(!contentToClone || !titleToClone) return;

            modalContent.innerHTML = '';
            modalContent.appendChild(titleToClone.cloneNode(true));
            const clonedDetails = contentToClone.cloneNode(true);
            clonedDetails.classList.remove('hidden');
            modalContent.appendChild(clonedDetails);
            
            productModal.classList.remove('hidden');
            document.body.classList.add('modal-open');
        }

        function closeModal() {
            productModal.classList.add('hidden');
            modalContent.innerHTML = '';
            document.body.classList.remove('modal-open');
        }
        
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (!section) return;
            mobileMenu.classList.add('hidden');
            const isActive = section.style.display === 'block';
            document.getElementById('cursos').style.display = 'none';
            document.getElementById('elite-fardamentos').style.display = 'none';
            if (!isActive) {
                section.style.display = 'block';
                setTimeout(() => section.scrollIntoView({ behavior: 'smooth', block: 'start' }), 100);
            }
        }

        // LÓGICA DO CARRINHO (ADAPTADA PARA O MODAL)
        function openCartModal() { cartModal.classList.remove('hidden'); document.body.classList.add('modal-open'); }
        function closeCartModal() { cartModal.classList.add('hidden'); document.body.classList.remove('modal-open'); }
        
        function prepareAddToCart(event) { event.stopPropagation(); }
        function addToCart(event, name, price) {
            event.stopPropagation();
            const li = event.target.closest('li');
            const quantity = parseInt(li.querySelector('.quantity-input').value) || 1;
            const size = li.querySelector('.size-selector')?.value || '';
            const color = li.querySelector('.color-selector')?.value || '';
            let itemName = name;
            if (size && color) itemName = `${name} (${size} / ${color})`; else if (size) itemName = `${name} (${size})`; else if (color) itemName = `${name} (${color})`;
            const existingItem = cart.find(item => item.name === itemName);
            if (existingItem) existingItem.quantity += quantity; else cart.push({ name: itemName, price: price, quantity: quantity });
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = `Adicionado! <i class="fa-solid fa-check"></i>`;
            button.classList.add('bg-green-500');
            setTimeout(() => { button.innerHTML = originalText; button.classList.remove('bg-green-500'); }, 2000);
            updateCart();
        }
        function updateCart() {
            cartItemsList.innerHTML = '';
            let total = 0;
            let totalItems = 0;
            cart.forEach((item, index) => {
                total += item.price * item.quantity;
                totalItems += item.quantity;
                const li = document.createElement('li');
                li.className = 'py-3 flex justify-between items-center text-sm';
                li.innerHTML = `<div><span class="font-bold">${item.quantity}x</span> ${item.name}</div><div class="item-actions flex items-center gap-3"><button class="text-lg" onclick="decreaseQuantity(${index})">-</button><button class="text-red-400" onclick="removeFromCart(${index})"><i class="fa-solid fa-trash"></i></button></div>`;
                cartItemsList.appendChild(li);
            });
            cartTotalEl.textContent = `Total: R$${total.toFixed(2)}`;
            
            if (totalItems > 0) {
                cartCountBadge.textContent = totalItems;
                cartCountBadge.classList.remove('hidden');
            } else {
                cartCountBadge.classList.add('hidden');
            }
        }
        function decreaseQuantity(index) { if (cart[index].quantity > 1) cart[index].quantity--; else cart.splice(index, 1); updateCart(); }
        function removeFromCart(index) { cart.splice(index, 1); updateCart(); }
        
        function checkout() {
            closeCartModal(); // Fecha o modal do carrinho
            const formError = document.getElementById('formError');
            formError.style.display = 'none';
            if (cart.length === 0) { formError.textContent = 'Seu carrinho está vazio!'; formError.style.display = 'block'; return; }
            const studentName = document.getElementById('student-name').value;
            const studentClass = document.getElementById('student-class').value;
            const paymentMethod = document.getElementById('payment-method').value;
            if (!studentName || !studentClass || !paymentMethod) { formError.textContent = 'Por favor, preencha todos os campos.'; formError.style.display = 'block'; document.getElementById('contato').scrollIntoView({ behavior: 'smooth' }); return; }
            let total = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            let message = `*PEDIDO - Medeiros Artigos Militares*\n\n*Nome:* ${studentName}\n*Turma:* ${studentClass}\n*Pagamento:* ${paymentMethod}\n\n*ITENS DO PEDIDO:*\n`;
            cart.forEach(item => { message += ` - ${item.quantity}x ${item.name}\n`; });
            message += `\n*TOTAL: R$${total.toFixed(2)}*\n\nAguardando instruções para pagamento e retirada.`;
            const encodedMessage = encodeURIComponent(message);
            window.open(`https://wa.me/5561998300711?text=${encodedMessage}`, '_blank');
            cart = [];
            updateCart();
            document.getElementById('student-name').value = '';
            document.getElementById('student-class').value = '';
            document.getElementById('payment-method').value = '';
        }

        function createProductCard(kit) {
            let itemsHtml = kit.items.map(item => `
                <li data-price="${item.price.toFixed(2)}" class="flex flex-col sm:flex-row justify-between items-center py-3 border-b border-gray-700/50 gap-3">
                    <span class="item-name-icon flex-1 text-center sm:text-left"><i class="fa-solid ${item.icon} text-brand-gold w-6"></i> ${item.name}</span>
                    <div class="quantity-selector flex items-center gap-2">
                         ${item.hasSize ? `<select class="size-selector bg-brand-dark text-xs rounded p-1 border border-gray-600">${item.sizes.map(s => `<option>${s}</option>`).join('')}</select>` : ''}
                         ${item.hasColor ? `<select class="color-selector bg-brand-dark text-xs rounded p-1 border border-gray-600">${item.colors.map(c => `<option>${c}</option>`).join('')}</select>` : ''}
                        <input type="number" min="1" value="1" class="quantity-input w-12 text-center bg-brand-dark rounded border border-gray-600">
                        <button class="add-to-cart-btn bg-brand-green-dark text-white text-xs font-semibold px-3 py-1 rounded-md hover:bg-opacity-80" onclick="addToCart(event, '${item.name.replace(/'/g, "\\'")}', ${item.price.toFixed(2)})">Adicionar</button>
                    </div>
                </li>`).join('');
            return `
                <div class="product-card glassmorphism p-6 rounded-2xl border-2 border-transparent hover:border-brand-gold" onclick="openModal(this)">
                    ${kit.badge ? `<div class="absolute top-4 right-4 bg-gradient-to-r from-yellow-400 to-amber-500 text-brand-dark px-3 py-1 rounded-full text-xs font-bold uppercase z-20">${kit.badge}</div>` : ''}
                    <h3 class="text-2xl font-bold text-white mb-4 text-center">${kit.title}</h3>
                    <img src="${kit.image}" alt="${kit.title}" class="w-full h-auto rounded-lg mb-4 mx-auto product-image-kit">
                    <div class="product-details hidden">
                        <p class="text-gray-300 text-sm mb-4">${kit.description}</p>
                        <ul class="text-sm">${itemsHtml}</ul>
                        <div class="payment text-xs text-gray-400 mt-4 p-3 bg-gray-900/50 rounded-lg"><strong>Pagamento:</strong> Débito, Crédito (até 12x), PIX (até 5% de desconto)</div>
                    </div>
                </div>`;
        }
        
         function createCourseCard(course) { 
             return `<div class="course-card glassmorphism p-6 rounded-2xl text-center border-2 border-transparent hover:border-brand-gold" onclick="openModal(this)">
                    <h3 class="text-xl font-bold text-white mb-0">${course.title}</h3>
                    <div class="course-details hidden">
                        <p class="text-gray-300 text-sm my-4">${course.description}</p>
                        <div class="course-link">
                            <a href="${course.link}" onclick="${course.needsCode ? `promptForCourseCode('${course.link}', event)` : 'event.stopPropagation()'}" target="_blank" class="inline-block bg-brand-gold text-brand-dark font-bold py-2 px-5 rounded-full text-sm transition-transform transform hover:scale-105">Acessar Curso</a>
                        </div>
                    </div>
                </div>`;
         }

        document.addEventListener('DOMContentLoaded', function() {
            // Lógica de renderização de cards e busca
            const fardamentoGrid = document.querySelector('#fardamento .product-grid');
            const acampamentoGrid = document.querySelector('#acampamento .product-grid');
            const eliteGrid = document.getElementById('elite-fardamentos-grid');
            const cursosGrid = document.querySelector('#cursos .course-grid');
            
            const fardamentoKits = [
                { title: 'Kit Básico', image: 'https://i.imgur.com/t2VQ9MF.jpeg', description: 'Kit inicial prático e durável...', items: [{name: 'Camiseta preta manga longa', price: 79.90, icon: 'fa-tshirt', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Calça tática ripstop', price: 169.90, icon: 'fa-person-hiking', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Coturno extra leve com zíper', price: 169.90, icon: 'fa-shoe-prints', hasSize: true, sizes: ['36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46']}, {name: 'Cinto', price: 39.90, icon: 'fa-circle-notch'}, {name: 'Bornal', price: 89.90, icon: 'fa-briefcase'}]},
                { title: 'Kit Avançado', badge: 'Mais Vendido', image: 'https://i.imgur.com/2w9HPjA.jpeg', description: 'Uniforme tático completo...', items: [{name: 'Colete tático modular', price: 489.90, icon: 'fa-vest', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Suspensório', price: 189.90, icon: 'fa-grip-lines-vertical'}, {name: 'Camiseta preta manga longa', price: 79.90, icon: 'fa-tshirt', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Calça tática ripstop', price: 169.90, icon: 'fa-person-hiking', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Coturno extra leve com zíper', price: 169.90, icon: 'fa-shoe-prints', hasSize: true, sizes: ['36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46']}, {name: 'Cinto', price: 39.90, icon: 'fa-circle-notch'}, {name: 'Bornal', price: 89.90, icon: 'fa-briefcase'}, {name: 'Distintivo Bombeiro Civil', price: 149.90, icon: 'fa-medal'}, {name: 'Caneta quebra vidro', price: 79.90, icon: 'fa-pen-nib'}, {name: 'Luva tática preta', price: 79.90, icon: 'fa-hand-fist' }, {name: 'Joelheira e Cotoveleira', price: 159.90, icon: 'fa-shield-halved'}, {name: 'Algema invictus', price: 199.90, icon: 'fa-lock'}, {name: 'Lanterna tática com LED lateral', price: 59.90, icon: 'fa-lightbulb'}]},
                { title: 'Kit Monstro', image: 'https://i.imgur.com/Y6LT4jq.jpeg', description: 'O kit definitivo para operações extremas...', items: [{name: 'Colete tático modular', price: 489.90, icon: 'fa-vest', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Suspensório', price: 189.90, icon: 'fa-grip-lines-vertical'}, {name: 'Camiseta preta manga longa', price: 79.90, icon: 'fa-tshirt', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Calça tática ripstop', price: 169.90, icon: 'fa-person-hiking', hasSize: true, sizes: ['P', 'M', 'G', 'GG', 'EXG']}, {name: 'Coturno extra leve com zíper', price: 169.90, icon: 'fa-shoe-prints', hasSize: true, sizes: ['36', '37', '38', '39', '40', '41', '42', '43', '44', '45', '46']}, {name: 'Cinto', price: 39.90, icon: 'fa-circle-notch'}, {name: 'Bornal', price: 89.90, icon: 'fa-briefcase'}, {name: 'Distintivo Bombeiro Civil', price: 149.90, icon: 'fa-medal'}, {name: 'Caneta quebra vidro', price: 79.90, icon: 'fa-pen-nib'}, {name: 'Luva tática preta', price: 79.90, icon: 'fa-hand-fist' }, {name: 'Joelheira e Cotoveleira', price: 159.90, icon: 'fa-shield-halved'}, {name: 'Algema invictus', price: 199.90, icon: 'fa-lock'}, {name: 'Lanterna tática com LED lateral', price: 59.90, icon: 'fa-lightbulb'}, {name: 'Calça tática bege / P.R.F., P.F.', price: 179.90, icon: 'fa-person-hiking', hasSize: true, sizes: ['P', 'M', 'G', 'GG']}]},
            ];
            const eliteKits = [
                { title: "Kit Auxiliar", image: "https://i.imgur.com/ih87A5E.jpeg", description: "Equipamentos essenciais para suporte tático...", items: [{ name: "Camiseta Combat Shirt", price: 189.90, icon: "fa-tshirt", hasSize: true, sizes: ["P", "M", "G", "GG"] }, { name: "Camiseta Bombeiro Civil", price: 79.90, icon: "fa-tshirt", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Preta", "Branca", "Vermelha"] }, { name: "Moletom Bombeiro Civil", price: 129.90, icon: "fa-shirt", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Preto", "Vermelho"] }, { name: "Calça tática foxboy", price: 289.90, icon: "fa-person-hiking", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Bege", "Preta", "Camuflada"] }, { name: "Coturno Atalaia", price: 389.90, icon: "fa-shoe-prints", hasSize: true, sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"], hasColor: true, colors: ["Bege", "Preto"] }, { name: "Balaclava Preta", price: 24.99, icon: "fa-mask-ventilator" }, { name: "Palmilha ortopédica", price: 39.99, icon: "fa-shoe-prints" }, { name: "Meia preta cano longo militar", price: 29.90, icon: "fa-socks" }, { name: "Manguito Preto", price: 19.90, icon: "fa-mitten", hasSize: true, sizes: ["P", "M", "G", "GG"] }, { name: "Oxímetro de dedo", price: 34.90, icon: "fa-heart-pulse" }]},
                { title: "Kit Instrutor", image: "https://i.imgur.com/aYGnbsv.jpeg", description: "Projetado para instrutores, este kit garante durabilidade...", items: [{ name: "Camiseta Combat Shirt", price: 189.90, icon: "fa-tshirt", hasSize: true, sizes: ["P", "M", "G", "GG"] }, { name: "Camiseta Bombeiro Civil", price: 79.90, icon: "fa-tshirt", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Preta", "Branca", "Vermelha"] }, { name: "Moletom Bombeiro Civil", price: 129.90, icon: "fa-shirt", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Preto", "Vermelho"] }, { name: "Calça tática invictus", price: 349.90, icon: "fa-person-hiking", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Bege", "Preta", "Camuflada"] }, { name: "Coturno Acero", price: 499.90, icon: "fa-shoe-prints", hasSize: true, sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"], hasColor: true, colors: ["Bege", "Preto"] }, { name: "Colar Bombeiro aço", price: 69.90, icon: "fa-medal" }, { name: "Sutache com NOME e Tipo sanguíneo", price: 24.99, icon: "fa-id-badge" }, { name: "Balaclava Preta", price: 24.99, icon: "fa-mask-ventilator" }, { name: "Palmilha ortopédica", price: 39.99, icon: "fa-shoe-prints" }, { name: "Meia preta cano longo militar", price: 29.90, icon: "fa-socks" }, { name: "Nugget para engraxar coturno preto", price: 29.90, icon: "fa-brush" }, { name: "Manguito Preto", price: 19.90, icon: "fa-mitten", hasSize: true, sizes: ["P", "M", "G", "GG"] }, { name: "Monitor digital de pressão", price: 119.90, icon: "fa-stethoscope" }]},
                { title: "Kit G.A.T.E", image: "https://i.imgur.com/L2PUx6z.jpeg", description: "Kit para operações de alto risco...", items: [{ name: "Camiseta Combat Shirt", price: 189.90, icon: "fa-tshirt", hasSize: true, sizes: ["P", "M", "G", "GG"] }, { name: "Camiseta Bombeiro Civil", price: 79.90, icon: "fa-tshirt", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Preta", "Branca", "Vermelha"] }, { name: "Moletom Bombeiro Civil", price: 129.90, icon: "fa-shirt", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Preto", "Vermelho"] }, { name: "Calça tática invictus", price: 349.90, icon: "fa-person-hiking", hasSize: true, sizes: ["P", "M", "G", "GG"], hasColor: true, colors: ["Bege", "Preta", "Camuflada"] }, { name: "Coturno Guartelá", price: 569.90, icon: "fa-shoe-prints", hasSize: true, sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"], hasColor: true, colors: ["Bege", "Preto"] }, { name: "Coturno Invictus", price: 649.90, icon: "fa-shoe-prints", hasSize: true, sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"], hasColor: true, colors: ["Bege", "Preto"] }, { name: "Colar Bombeiro aço", price: 69.90, icon: "fa-medal" }, { name: "Sutache com NOME e Tipo sanguíneo", price: 24.99, icon: "fa-id-badge" }, { name: "Balaclava Preta", price: 24.99, icon: "fa-mask-ventilator" }, { name: "Palmilha ortopédica", price: 39.99, icon: "fa-shoe-prints" }, { name: "Meia preta cano longo militar", price: 29.90, icon: "fa-socks" }, { name: "Nugget para engraxar coturno preto", price: 29.90, icon: "fa-brush" }, { name: "Manguito Preto", price: 19.90, icon: "fa-mitten", hasSize: true, sizes: ["P", "M", "G", "GG"] }, { name: "Oxímetro de dedo", price: 34.90, icon: "fa-heart-pulse" }, { name: "Monitor digital de pressão", price: 119.90, icon: "fa-stethoscope" }, { name: "Gorro vermelho Bombeiro Civil", price: 89.90, icon: "fa-hat-winter" }]},
            ];
            const acampamentoKits = [
                { title: 'Kit Recruta (Básico)', image: 'https://i.imgur.com/adECSak.jpeg', description: 'O essencial para missões seguras...', items: [{name: 'Barraca Camuflada', price: 150.00, icon: 'fa-tent'}, {name: 'Saco de dormir Individual', price: 100.00, icon: 'fa-bed'}, {name: 'Lanterna de cabeça', price: 40.00, icon: 'fa-lightbulb'}, {name: 'Pulseira Tática de Sobrevivência', price: 40.00, icon: 'fa-compass'}, {name: 'Repelente em Spray Compacto', price: 30.00, icon: 'fa-bug'}, {name: 'Toalha de Microfibra Compacta', price: 40.00, icon: 'fa-square-full' }, {name: 'Lenço umedecido', price: 20.00, icon: 'fa-box-tissue'}]},
                { title: 'Kit Capitão (Intermediário)', image: 'https://i.imgur.com/FkZVMfX.jpeg', description: 'Equilíbrio entre conforto e funcionalidade.', items: [{name: 'Barraca Camuflada', price: 150.00, icon: 'fa-tent'}, {name: 'Saco de dormir Individual', price: 100.00, icon: 'fa-bed'}, {name: 'Kit térmico', price: 100.00, icon: 'fa-temperature-full'}, {name: 'Lanterna de cabeça', price: 40.00, icon: 'fa-lightbulb'}, {name: 'Pulseira Tática de Sobrevivência', price: 40.00, icon: 'fa-compass'}, {name: 'Garrafa Tática Cantil', price: 59.90, icon: 'fa-bottle-water'}, {name: 'Toalha de Microfibra Compacta', price: 40.00, icon: 'fa-square-full' }, {name: 'Mosquetão Tático com Trava', price: 50.00, icon: 'fa-link'}, {name: 'Repelente em Spray Compacto', price: 30.00, icon: 'fa-bug'}, {name: 'Protetor Labial com FPS', price: 20.00, icon: 'fa-sun'}, {name: 'Protetor de Pescoço (Buff)', price: 25.00, icon: 'fa-user-ninja'}, {name: 'Lenço umedecido', price: 20.00, icon: 'fa-box-tissue'}]},
                { title: 'Kit Comandos (Avançado)', badge: 'Mais Completo', image: 'https://i.imgur.com/jbpqCx4.png', description: 'Equipamentos de ponta para missões críticas...', items: [{name: 'Barraca Camuflada', price: 150.00, icon: 'fa-tent'}, {name: 'Saco de dormir Individual', price: 100.00, icon: 'fa-bed'}, {name: 'Kit térmico', price: 100.00, icon: 'fa-temperature-full'}, {name: 'Lanterna de cabeça', price: 40.00, icon: 'fa-lightbulb'}, {name: 'Mochila Tática', price: 150.00, icon: 'fa-bag-shopping'}, {name: 'Kit Joelheira e Cotoveleira', price: 159.90, icon: 'fa-shield-halved'}, {name: 'Pulseira Tática de Sobrevivência', price: 40.00, icon: 'fa-compass'}, {name: 'Garrafa Tática Cantil', price: 59.90, icon: 'fa-bottle-water'}, {name: 'Cinto Tático', price: 40.00, icon: 'fa-circle-notch'}, {name: 'Mosquetão Tático com Trava', price: 50.00, icon: 'fa-link'}, {name: 'Toalha de Microfibra Compacta', price: 40.00, icon: 'fa-square-full' }, {name: 'Protetor Solar em Bastão', price: 80.00, icon: 'fa-sun'}, {name: 'Luvas Táticas Leves', price: 50.00, icon: 'fa-hand-fist' }, {name: 'Repelente em Spray Compacto', price: 30.00, icon: 'fa-bug'}, {name: 'Protetor Labial com FPS', price: 20.00, icon: 'fa-sun'}, {name: 'Protetor de Pescoço (Buff)', price: 25.00, icon: 'fa-user-ninja'}, {name: 'Lenço umedecido', price: 20.00, icon: 'fa-box-tissue'}]},
            ];
            const cursos = [
                { title: 'Instrutor', description: 'Capacite-se para formar novos profissionais.', link: 'https://instrutormedeiros.github.io/cursoinstrutor/', needsCode: true }, { title: 'NR10', description: 'Segurança em instalações e serviços com eletricidade.', link: 'https://instrutormedeiros.github.io/cursonr10/', needsCode: true }, { title: 'Cuidador de Idosos', description: 'Desenvolva habilidades para cuidar de idosos.', link: 'https://wa.me/5561998300711?text=Olá!%20Gostaria%20de%20saber%20mais%20sobre%20o%20curso%20de%20Cuidador%20de%20Idosos.', needsCode: false }, { title: 'Agente de Portaria', description: 'Prepare-se para atuar na portaria com foco em segurança.', link: 'https://wa.me/5561998300711?text=Olá!%20Gostaria%20de%20saber%20mais%20sobre%20o%20curso%20de%20Agente%20de%20Portaria.', needsCode: false }, { title: 'Segurança Patrimonial', description: 'Técnicas de vigilância para proteger patrimônios.', link: 'https://instrutormedeiros.github.io/segurancapatrimonial/', needsCode: true }, { title: 'Libras', description: 'Domine a Língua Brasileira de Sinais.', link: 'https://wa.me/5561998300711?text=Olá!%20Gostaria%20de%20saber%20mais%20sobre%20o%20curso%20de%20Libras.', needsCode: false }, { title: 'Urgência e Emergência', description: 'Aprenda a agir em situações críticas de saúde.', link: 'https://wa.me/5561998300711?text=Olá!%20Gostaria%20de%20saber%20mais%20sobre%20o%20curso%20de%20Urgência%20e%20Emergência.', needsCode: false }, { title: 'Urgências Psiquiátricas', description: 'Treinamento para lidar com crises psiquiátricas.', link: 'https://wa.me/5561998300711?text=Olá!%20Gostaria%20de%20saber%20mais%20sobre%20o%20curso%20de%20Urgências%20Psiquiátricas.', needsCode: false }, { title: 'Animais Peçonhentos', description: 'Manejo de acidentes com animais peçonhentos.', link: 'https://instrutormedeiros.github.io/animaispeconhentos/', needsCode: true },
            ];
            
            fardamentoGrid.innerHTML = fardamentoKits.map(createProductCard).join('');
            eliteGrid.innerHTML = eliteKits.map(createProductCard).join('');
            acampamentoGrid.innerHTML = acampamentoKits.map(createProductCard).join('');
            cursosGrid.innerHTML = cursos.map(createCourseCard).join('');

            document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));
            
            const searchInput = document.getElementById('searchInput');
            const productSections = document.querySelectorAll('.product-section');

            searchInput.addEventListener('keyup', () => {
                const searchTerm = searchInput.value.toLowerCase();
                productSections.forEach(section => {
                    const cards = section.querySelectorAll('.product-card, .course-card');
                    let visibleCards = 0;
                    cards.forEach(card => {
                        if (card.textContent.toLowerCase().includes(searchTerm)) { card.style.display = ''; visibleCards++; } 
                        else { card.style.display = 'none'; }
                    });
                    const sectionHeader = section.querySelector('.section-header');
                    if (sectionHeader) sectionHeader.style.display = visibleCards > 0 ? '' : 'none';
                });
            });
        });
    </script>
</body>
</html>
